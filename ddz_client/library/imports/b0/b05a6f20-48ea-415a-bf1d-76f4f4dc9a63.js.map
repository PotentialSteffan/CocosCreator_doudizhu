{"version":3,"sources":["../../../../../assets/scripts/loginscene/assets/scripts/loginscene/loginScene.js"],"names":["cc","Class","extends","Component","properties","wait_node","Node","onLoad","isopen_sound","audioEngine","play","url","raw","myglobal","socket","initSocket","start","onButtonCilck","event","customData","console","log","request_wxLogin","uniqueID","playerData","accountID","nickName","avatarUrl","err","result","JSON","stringify","gobal_count","goldcount","director","loadScene","bind","request_guestLogin"],"mappings":";;;;;;AAAA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACTC,mBAAUL,GAAGM;AADJ,KAHP;;AAOL;;AAEAC,UATK,oBASK;AACN;AACA,YAAGC,YAAH,EAAgB;AACZR,eAAGS,WAAH,CAAeC,IAAf,CAAoBV,GAAGW,GAAH,CAAOC,GAAP,CAAW,8BAAX,CAApB,EAA+D,IAA/D;AACF;;AAEDC,2BAASC,MAAT,CAAgBC,UAAhB;AACJ,KAhBI;AAkBLC,SAlBK,mBAkBI,CACR,CAnBI;AAqBLC,iBArBK,yBAqBSC,KArBT,EAqBeC,UArBf,EAqB0B;AAC3B,gBAAOA,UAAP;AACI,iBAAK,UAAL;AACI;AACAC,wBAAQC,GAAR,CAAYF,aAAW,SAAvB;;AAEA;;AAEAN,mCAASC,MAAT,CAAgBQ,eAAhB,CAAgC;AAC5BC,8BAASV,mBAASW,UAAT,CAAoBD,QADD;AAE5BE,+BAAUZ,mBAASW,UAAT,CAAoBC,SAFF;AAG5BC,8BAASb,mBAASW,UAAT,CAAoBE,QAHD;AAI5BC,+BAAUd,mBAASW,UAAT,CAAoBG;AAJF,iBAAhC,EAKE,UAASC,GAAT,EAAaC,MAAb,EAAoB;AAClB;AACA;AACA;AACA,wBAAGD,OAAK,CAAR,EAAU;AACNR,gCAAQC,GAAR,CAAY,SAAOO,GAAnB;AACA;AACH;;AAEDR,4BAAQC,GAAR,CAAY,iBAAiBS,KAAKC,SAAL,CAAeF,MAAf,CAA7B;AACAhB,uCAASW,UAAT,CAAoBQ,WAApB,GAAkCH,OAAOI,SAAzC;AACAjC,uBAAGkC,QAAH,CAAYC,SAAZ,CAAsB,WAAtB;AACH,iBAZC,CAYAC,IAZA,CAYK,IAZL,CALF;AAkBA;AACA,iBAAK,aAAL;AACQvB,mCAASC,MAAT,CAAgBuB,kBAAhB,CAAmC;AAC/Bd,8BAASV,mBAASW,UAAT,CAAoBD,QADE;AAE/BE,+BAAUZ,mBAASW,UAAT,CAAoBC,SAFC;AAG/BC,8BAASb,mBAASW,UAAT,CAAoBE,QAHE;AAI/BC,+BAAUd,mBAASW,UAAT,CAAoBG;AAJC,iBAAnC,EAKE,UAASC,GAAT,EAAaC,MAAb,EAAoB;AAClB;AACA;AACA;AACA,wBAAGD,OAAK,CAAR,EAAU;AACNR,gCAAQC,GAAR,CAAY,SAAOO,GAAnB;AACA;AACH;;AAEDR,4BAAQC,GAAR,CAAY,iBAAiBS,KAAKC,SAAL,CAAeF,MAAf,CAA7B;AACAhB,uCAASW,UAAT,CAAoBQ,WAApB,GAAkCH,OAAOI,SAAzC;AACAjC,uBAAGkC,QAAH,CAAYC,SAAZ,CAAsB,WAAtB;AACH,iBAZC,CAYAC,IAZA,CAYK,IAZL,CALF;;AAmBR;AACJ;;AAEI;AAjDR;AAmDH;AACD;;;AA1EK,CAAT","file":"loginScene.js","sourceRoot":"../../../../../assets/scripts/loginscene","sourcesContent":["import myglobal from \"../mygolbal.js\"\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n       wait_node:cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        //console.log(\"qian_state.qian:\"+ qian_state.qian)\n        if(isopen_sound){\n            cc.audioEngine.play(cc.url.raw(\"resources/sound/login_bg.ogg\"),true) \n         }\n           \n         myglobal.socket.initSocket()\n    },\n    \n    start () {\n    },\n    \n    onButtonCilck(event,customData){\n        switch(customData){\n            case \"wx_login\":\n                // console.log(\"wx_login request\")\n                console.log(customData+\"request\")\n                \n                //this.wait_node.active = true\n                \n                myglobal.socket.request_wxLogin({\n                    uniqueID:myglobal.playerData.uniqueID,\n                    accountID:myglobal.playerData.accountID,\n                    nickName:myglobal.playerData.nickName,\n                    avatarUrl:myglobal.playerData.avatarUrl,\n                },function(err,result){\n                    //请求返回\n                    //先隐藏等待UI\n                    //this.wait_node.active = false\n                    if(err!=0){\n                        console.log(\"err:\"+err)\n                        return     \n                    }\n                    \n                    console.log(\"login sucess\" + JSON.stringify(result))\n                    myglobal.playerData.gobal_count = result.goldcount\n                    cc.director.loadScene(\"hallScene\")\n                }.bind(this))\n                break\n                case 'guest_login':\n                        myglobal.socket.request_guestLogin({\n                            uniqueID:myglobal.playerData.uniqueID,\n                            accountID:myglobal.playerData.accountID,\n                            nickName:myglobal.playerData.nickName,\n                            avatarUrl:myglobal.playerData.avatarUrl,\n                        },function(err,result){\n                            //请求返回\n                            //先隐藏等待UI\n                            //this.wait_node.active = false\n                            if(err!=0){\n                                console.log(\"err:\"+err)\n                                return     \n                            }\n                            \n                            console.log(\"login sucess\" + JSON.stringify(result))\n                            myglobal.playerData.gobal_count = result.goldcount\n                            cc.director.loadScene(\"hallScene\")\n                        }.bind(this))\n                \n                break;\n            default:\n\n                break\n        }\n    }\n    // update (dt) {},\n\n\n});\n"]}