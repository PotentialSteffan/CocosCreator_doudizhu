{"version":3,"sources":["gameScene.js"],"names":["cc","Class","extends","Component","properties","di_label","Label","beishu_label","roomid_label","player_node_prefabs","Prefab","players_seat_pos","Node","gameEnd","onLoad","playerNodeList","string","myglobal","playerData","bottom","rate","roomstate","RoomState","ROOM_INVALID","node","on","console","log","i","length","emit","bind","socket","onRoomChangeState","data","event","gameui_node","getChildByName","request_enter_room","err","result","JSON","stringify","seatid","seatindex","playerdata_list_pos","setPlayerSeatPos","playerdata_list","playerdata","roomid","housemanageid","addPlayerNode","isopen_sound","audioEngine","stopAll","play","url","raw","gamebefore_node","onPlayerJoinRoom","join_playerdata","onPlayerReady","onGameStart","gamebeforeUI","active","onRobState","onChangeMaster","master_accountid","onShowBottomCard","seat_index","player_data","playernode_inst","instantiate","parent","push","index","position","children","getComponent","init_data","start","getUserOutCardPosByAccount","accountid","node_script","seat_node","index_name","out_card_node"],"mappings":"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","file":"gameScene.js","sourceRoot":"../../../../../assets/scripts/gameScene","sourcesContent":["import myglobal from \"../../mygolbal.js\"\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        di_label:cc.Label,\n        beishu_label:cc.Label,\n        roomid_label:cc.Label,\n        player_node_prefabs:cc.Prefab,\n        //绑定玩家座位,下面有3个子节点\n        players_seat_pos:cc.Node,\n\n    },\n    //本局结束，做状态清除\n    gameEnd(){\n\n    },\n    onLoad () {\n        this.playerNodeList = []\n        this.di_label.string = \"底:\" +  myglobal.playerData.bottom\n        this.beishu_label.string = \"倍数:\" + myglobal.playerData.rate\n        this.roomstate = RoomState.ROOM_INVALID\n        //监听，给其他玩家发牌(内部事件)\n        this.node.on(\"pushcard_other_event\",function(){\n            console.log(\"gamescene pushcard_other_event\")\n            for(var i=0;i<this.playerNodeList.length;i++){\n                    var node = this.playerNodeList[i]\n                    if(node){\n                    //给playernode节点发送事件\n                        node.emit(\"push_card_event\")\n                    }\n            }\n        }.bind(this))\n\n        //监听房间状态改变事件\n        myglobal.socket.onRoomChangeState(function(data){\n            //回调的函数参数是进入房间用户消息\n            console.log(\"onRoomChangeState:\"+data)\n            this.roomstate = data\n        }.bind(this))\n        //\n        this.node.on(\"canrob_event\",function(event){\n            console.log(\"gamescene canrob_event:\"+event)\n            //通知给playernode子节点\n            for(var i=0;i<this.playerNodeList.length;i++){\n                var node = this.playerNodeList[i]\n                if(node){\n                    //给playernode节点发送事件\n                    node.emit(\"playernode_canrob_event\",event)\n                }\n            }\n        }.bind(this))\n\n        this.node.on(\"choose_card_event\",function(event){\n            console.log(\"--------choose_card_event-----------\")\n            var gameui_node =  this.node.getChildByName(\"gameingUI\")\n            if(gameui_node==null){\n               console.log(\"get childer name gameingUI\")\n               return\n            }\n            gameui_node.emit(\"choose_card_event\",event)\n           \n        }.bind(this))\n\n        this.node.on(\"unchoose_card_event\",function(event){\n            console.log(\"--------unchoose_card_event-----------\")\n            var gameui_node =  this.node.getChildByName(\"gameingUI\")\n            if(gameui_node==null){\n               console.log(\"get childer name gameingUI\")\n               return\n            }\n            gameui_node.emit(\"unchoose_card_event\",event)\n        }.bind(this))\n        //监听给玩家添加三张底牌\n        // this.node.on(\"add_three_card\",function(event){\n        //     console.log(\"add_three_card:\"+event)\n        //     for(var i=0;i<this.playerNodeList.length;i++){\n        //         var node = this.playerNodeList[i]\n        //         if(node){\n        //             //给playernode节点发送事件\n        //             node.emit(\"playernode_add_three_card\",event)\n        //         }\n        //     }\n        // }.bind(this))\n\n        myglobal.socket.request_enter_room({},function(err,result){\n            console.log(\"enter_room_resp\"+ JSON.stringify(result))\n            if(err!=0){\n               console.log(\"enter_room_resp err:\"+err)\n            }else{\n             \n              //enter_room成功\n              //notify ={\"seatid\":1,\"playerdata\":[{\"accountid\":\"2117836\",\"nick_name\":\"tiny543\",\"avatarUrl\":\"http://xxx\",\"goldcount\":1000}]}\n                var seatid = result.seatindex //自己在房间里的seatid\n                this.playerdata_list_pos = []  //3个用户创建一个空用户列表\n                this.setPlayerSeatPos(seatid)\n\n                var playerdata_list = result.playerdata\n                var roomid = result.roomid\n                this.roomid_label.string = \"房间号:\" + roomid\n                myglobal.playerData.housemanageid = result.housemanageid\n                \n                for(var i=0;i<playerdata_list.length;i++){\n                    //consol.log(\"this----\"+this)\n                    this.addPlayerNode(playerdata_list[i])\n                }\n\n                if(isopen_sound){\n                    cc.audioEngine.stopAll()\n                    cc.audioEngine.play(cc.url.raw(\"resources/sound/bg.mp3\"),true) \n                 }\n            }\n            var gamebefore_node = this.node.getChildByName(\"gamebeforeUI\")\n            gamebefore_node.emit(\"init\")\n        }.bind(this))\n\n        //在进入房间后，注册其他玩家进入房间的事件\n        myglobal.socket.onPlayerJoinRoom(function(join_playerdata){\n            //回调的函数参数是进入房间用户消息\n            console.log(\"onPlayerJoinRoom:\"+JSON.stringify(join_playerdata))\n            this.addPlayerNode(join_playerdata)\n        }.bind(this))\n        \n        //回调参数是发送准备消息的accountid\n        myglobal.socket.onPlayerReady(function(data){\n            console.log(\"-------onPlayerReady:\"+data)\n            for(var i=0;i<this.playerNodeList.length;i++){\n                var node = this.playerNodeList[i]\n                if(node){\n                    node.emit(\"player_ready_notify\",data)\n                }\n            }\n        }.bind(this))\n\n        myglobal.socket.onGameStart(function(){\n            for(var i=0;i<this.playerNodeList.length;i++){\n                var node = this.playerNodeList[i]\n                if(node){\n                    node.emit(\"gamestart_event\")\n                }\n            }\n\n        //隐藏gamebeforeUI节点\n        var gamebeforeUI = this.node.getChildByName(\"gamebeforeUI\")\n            if(gamebeforeUI){\n                gamebeforeUI.active = false\n            }\n        }.bind(this))\n\n              //监听服务器玩家抢地主消息\n        myglobal.socket.onRobState(function(event){\n                console.log(\"-----onRobState\"+JSON.stringify(event))\n                //onRobState{\"accountid\":\"2162866\",\"state\":1}\n                for(var i=0;i<this.playerNodeList.length;i++){\n                    var node = this.playerNodeList[i]\n                    if(node){\n                        //给playernode节点发送事件\n                        node.emit(\"playernode_rob_state_event\",event)\n                    }\n                }\n        }.bind(this))\n\n        //注册监听服务器确定地主消息\n        myglobal.socket.onChangeMaster(function(event){\n            console.log(\"onChangeMaster\"+event)\n            //保存一下地主id\n            myglobal.playerData.master_accountid = event\n            for(var i=0;i<this.playerNodeList.length;i++){\n                var node = this.playerNodeList[i]\n                if(node){\n                    //给playernode节点发送事件\n                    node.emit(\"playernode_changemaster_event\",event)\n                }\n            }\n        }.bind(this))\n        \n        //注册监听服务器显示底牌消息\n        myglobal.socket.onShowBottomCard(function(event){\n           console.log(\"onShowBottomCard---------\"+event)\n           var gameui_node =  this.node.getChildByName(\"gameingUI\")\n           if(gameui_node==null){\n              console.log(\"get childer name gameingUI\")\n              return\n           }\n           gameui_node.emit(\"show_bottom_card_event\",event)\n        }.bind(this))\n    },\n\n    //seat_index自己在房间的位置id\n    setPlayerSeatPos(seat_index){\n        if(seat_index < 1 || seat_index > 3){\n            console.log(\"seat_index error\"+seat_index)\n            return\n        }\n\n        console.log(\"setPlayerSeatPos seat_index:\" + seat_index)\n       \n        //界面位置转化成逻辑位置\n        switch(seat_index){\n            case 1:\n                   this.playerdata_list_pos[1] = 0\n                   this.playerdata_list_pos[2] = 1 \n                   this.playerdata_list_pos[3] = 2\n              break\n             case 2:\n                   \n\n                    this.playerdata_list_pos[2] = 0\n                    this.playerdata_list_pos[3] = 1\n                    this.playerdata_list_pos[1] = 2\n                    break\n             case 3:\n                    this.playerdata_list_pos[3] = 0     \n                    this.playerdata_list_pos[1] = 1\n                    this.playerdata_list_pos[2] = 2\n                    break\n            default: \n              break      \n        } \n\n    },\n\n    addPlayerNode(player_data){\n        var playernode_inst = cc.instantiate(this.player_node_prefabs)\n        playernode_inst.parent = this.node\n        //创建的节点存储在gamescene的列表中\n        this.playerNodeList.push(playernode_inst)\n\n        //玩家在room里的位置索引(逻辑位置)\n        var index = this.playerdata_list_pos[player_data.seatindex]\n        console.log(\"index \"+player_data.seatindex+ \" \"+index)\n        playernode_inst.position = this.players_seat_pos.children[index].position\n        playernode_inst.getComponent(\"player_node\").init_data(player_data,index)\n    },\n\n    start () {\n    },\n\n    /*\n     //通过accountid获取用户出牌放在gamescend的位置 \n     做法：先放3个节点在gameacene的场景中cardsoutzone(012)\n           \n    */\n    getUserOutCardPosByAccount(accountid){\n        console.log(\"getUserOutCardPosByAccount accountid:\"+accountid)\n        for(var i=0;i<this.playerNodeList.length;i++){\n            var node = this.playerNodeList[i]\n            if(node){\n                //获取节点绑定的组件\n                var node_script = node.getComponent(\"player_node\")\n                //如果accountid和player_node节点绑定的accountid相同\n                //接获取player_node的子节点\n                if(node_script.accountid===accountid){\n                  var seat_node = this.players_seat_pos.children[node_script.seat_index]\n                  var index_name = \"cardsoutzone\"+node_script.seat_index\n                  //console.log(\"getUserOutCardPosByAccount index_name:\"+index_name)\n                  var out_card_node = seat_node.getChildByName(index_name)\n                  //console.log(\"OutZone:\"+ out_card_node.name)\n                  return out_card_node\n                }\n            }\n        }\n\n        return null\n    },\n    // update (dt) {},\n});\n"]}