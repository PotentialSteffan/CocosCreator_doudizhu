{"version":3,"sources":["gamebeforeUI.js"],"names":["cc","Class","extends","Component","properties","btn_ready","Node","btn_gamestart","onLoad","active","node","on","console","log","myglobal","playerData","housemanageid","accountID","bind","socket","onChangeHouseManage","data","JSON","stringify","start","onButtonClick","event","customData","requestReady","requestStart","err"],"mappings":";;;;;;AAAA;;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAUL,GAAGM,IADL;AAERC,uBAAcP,GAAGM;AAFT,KAHP;;AAQL;;AAEAE,UAVK,oBAUK;;AAEN,aAAKD,aAAL,CAAmBE,MAAnB,GAA4B,KAA5B;AACA,aAAKJ,SAAL,CAAeI,MAAf,GAAwB,KAAxB;;AAEA;AACA,aAAKC,IAAL,CAAUC,EAAV,CAAa,MAAb,EAAoB,YAAU;AAC1BC,oBAAQC,GAAR,CAAY,oBAAZ;AACAD,oBAAQC,GAAR,CAAY,sCAAoCC,mBAASC,UAAT,CAAoBC,aAApE;AACAJ,oBAAQC,GAAR,CAAY,kCAAgCC,mBAASC,UAAT,CAAoBE,SAAhE;AACA,gBAAGH,mBAASC,UAAT,CAAoBC,aAApB,IAAmCF,mBAASC,UAAT,CAAoBE,SAA1D,EAAoE;AAChE;AACA,qBAAKV,aAAL,CAAmBE,MAAnB,GAA4B,IAA5B;AACA,qBAAKJ,SAAL,CAAeI,MAAf,GAAwB,KAAxB;AACH,aAJD,MAIK;AACD,qBAAKF,aAAL,CAAmBE,MAAnB,GAA4B,KAA5B;AACA,qBAAKJ,SAAL,CAAeI,MAAf,GAAwB,IAAxB;AACH;AACJ,SAZmB,CAYlBS,IAZkB,CAYb,IAZa,CAApB;;AAcA;AACA;AACA;AACA;AACA;;AAEAJ,2BAASK,MAAT,CAAgBC,mBAAhB,CAAoC,UAASC,IAAT,EAAc;AAC9CT,oBAAQC,GAAR,CAAY,4CAA0CS,KAAKC,SAAL,CAAeF,IAAf,CAAtD;AACAP,+BAASC,UAAT,CAAoBC,aAApB,GAAoCK,IAApC;AACA,gBAAGP,mBAASC,UAAT,CAAoBC,aAApB,IAAmCF,mBAASC,UAAT,CAAoBE,SAA1D,EAAoE;AAChE;AACA,qBAAKV,aAAL,CAAmBE,MAAnB,GAA4B,IAA5B;AACA,qBAAKJ,SAAL,CAAeI,MAAf,GAAwB,KAAxB;AACH,aAJD,MAIK;AACD,qBAAKF,aAAL,CAAmBE,MAAnB,GAA4B,KAA5B;AACA,qBAAKJ,SAAL,CAAeI,MAAf,GAAwB,IAAxB;AACH;AAEJ,SAZmC,CAYlCS,IAZkC,CAY7B,IAZ6B,CAApC;AAaH,KAjDI;AAmDLM,SAnDK,mBAmDI,CAER,CArDI;;;AAuDL;;AAEAC,iBAzDK,yBAyDSC,KAzDT,EAyDeC,UAzDf,EAyD0B;AAC3B,gBAAOA,UAAP;AACI,iBAAK,WAAL;AACIf,wBAAQC,GAAR,CAAY,WAAZ;AACAC,mCAASK,MAAT,CAAgBS,YAAhB;AACA;AACJ,iBAAK,WAAL;AACI;AACA;AACA;AACChB,wBAAQC,GAAR,CAAY,WAAZ;AACAC,mCAASK,MAAT,CAAgBU,YAAhB,CAA6B,UAASC,GAAT,EAAaT,IAAb,EAAkB;AAC5C,wBAAGS,OAAK,CAAR,EAAU;AACNlB,gCAAQC,GAAR,CAAY,qBAAmBiB,GAA/B;AACH,qBAFD,MAEK;AACDlB,gCAAQC,GAAR,CAAY,sBAAqBS,KAAKC,SAAL,CAAeF,IAAf,CAAjC;AAEH;AACH,iBAPD;AAQA;AACL;AACI;AApBR;AAsBH;AAhFI,CAAT","file":"gamebeforeUI.js","sourceRoot":"../../../../../assets/scripts/gameScene","sourcesContent":["import myglobal from \"../../mygolbal.js\"\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        btn_ready:cc.Node,\n        btn_gamestart:cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n\n        this.btn_gamestart.active = false\n        this.btn_ready.active = false\n\n        //监听本地的发送的消息\n        this.node.on(\"init\",function(){\n            console.log(\"game beforeui init\")\n            console.log(\"myglobal.playerData.housemanageid\"+myglobal.playerData.housemanageid)\n            console.log(\"myglobal.playerData.accountID\"+myglobal.playerData.accountID)\n            if(myglobal.playerData.housemanageid==myglobal.playerData.accountID){\n                //自己就是房主\n                this.btn_gamestart.active = true\n                this.btn_ready.active = false\n            }else{\n                this.btn_gamestart.active = false\n                this.btn_ready.active = true\n            }\n        }.bind(this))\n\n        //监听服务器发送来的消息\n        // myglobal.socket.onGameStart(function(){\n        //     console.log(\"gamebrforeUI onGameStart revice\")\n        //     this.node.active = false\n        // }.bind(this))\n\n        myglobal.socket.onChangeHouseManage(function(data){\n            console.log(\"gamebrforeUI onChangeHouseManage revice\"+JSON.stringify(data))\n            myglobal.playerData.housemanageid = data\n            if(myglobal.playerData.housemanageid==myglobal.playerData.accountID){\n                //自己就是房主\n                this.btn_gamestart.active = true\n                this.btn_ready.active = false\n            }else{\n                this.btn_gamestart.active = false\n                this.btn_ready.active = true\n            }\n\n        }.bind(this))\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n    \n    onButtonClick(event,customData){\n        switch(customData){\n            case \"btn_ready\":\n                console.log(\"btn_ready\")\n                myglobal.socket.requestReady()\n                break\n            case \"btn_start\":\n                // if(isopen_sound){\n                //    cc.audioEngine.play(cc.url.raw(\"resources/sound/start_a.ogg\")) \n                //  }\n                 console.log(\"btn_start\")\n                 myglobal.socket.requestStart(function(err,data){\n                    if(err!=0){\n                        console.log(\"requestStart err\"+err)\n                    }else{\n                        console.log(\"requestStart data\"+ JSON.stringify(data))\n                        \n                    }\n                 })\n                 break    \n            default:\n                break\n        }\n    }\n});\n"]}